#Elasticsearch 

인덱스 매핑에 지정할 수 있는 설정들은 다음과 같다.
> [!summary]+ 
> 1. 필드 타입
> 2. doc_values
> 3. fielddata
> 4. \_source
> 5. index

자세한 내용은 책 참고.
## 1. 필드 타입
매핑의 기본은 필드 타입이다. **필드 타입은 필드의 값이 어떤 형태로 저장될지를 지정**한다. 한번 지정되면 변경이 불가능하므로 매우 신중하게 지정해야 한다.

### 필드 타입 종류
> [!summary]+ 
> + **심플 타입**
> **text, keyword**, date, long, double, boolean, ip 등
> 
> + ** 계층 구조를 지원하는 타입**
> object, nested 등
> 
> + **그 외 특수한 타입**
> geo_point, geo_shape 등

> [!check]+ 
> text : 애널라이저 적용 후 색인 -> 값 분석하여 토큰으로 쪼갠 후 역색인 -> term (전문 검색에 적합)
> keyword : 토큰 쪼개기 x (정렬, 집계, 스크립트 작업 유리, 일치 검색에 적합)
## 심플 타입
> [!summary]+ 
> 숫자 타입
> date 타입 : format 옵션 지정 가능
> 배열 : 배열을 표현하는 별도의 타입 구분 없음

## 계층 구조를 지원하는 타입
> [!summary]+ 
> Object : 필드 하위에 다른 필드를 여럿 포함하는 객체 데이터 담기 가능. 기본값이기 때문에 명시적으로 표현하지는 않는다. 내부적으로는 평탄화된 키-값 쌍으로 색인.
> nested: object 타입과 다르게 배열 내 각 객체를 독립적으로 취급


---

## 2. doc_values
ES의 검색은 **역색인을 기반으로 한 색인**을 이용한다. 텀을 보고 역색인에서 문서를 찾는 방식이다. 하지만 정렬, 집계, 스크립트 작업 시에는 접근법이 다르다. 문서를 보고 필드 내의 텀을 찾는데, 이때 doc_values는 디스크를 기반으로 한 자료 구조로 파일 시스템 캐시를 통해 효율적으로 작업을 수행할 수 있게 설계되었다.

ES에서는 text와 annotated_text를 제외한 거의 모든 필드 타입이 doc_values를 지원하고, 필요 없는 필드는 끌 수도 있다.

## 3. fielddate
text 타입은 파일 시스템 기반의 캐시인 doc_values를 사용할 수 없기 때문에 text를 대상으로 정렬, 집계, 스크립트 작업 시 fielddate라는 캐시를 이용한다.

> [!warning]+ 
> 신중하게 활성화하기!

## 4. \_source