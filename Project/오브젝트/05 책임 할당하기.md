---
title: 05 책임 할당하기
date: 2024-01-14 19:56
categories:
  - OOP
  - 오브젝트
tags:
  - OOP
  - 객체지향
  - 개발서적
image: 
path:
---

데이터 중심 설계로 인해 발생하는 문제점을 해결할 수 있는 가장 기본적인 방법은 데이터가 아닌 책임에 초점을 맞추는 것이다. 동일한 문제를 해결할 수 있는 다양한 책임 할당 방법이 존재하며, 최선의 할당을 위해 GRASP 패턴을 이해해 보도록 하자.

## 책임 주도 설계를 향해
+ 데이터보다 행동을 먼저 결정하라
+ 협력이라는 문맥 안에서 책임을 결정하라 : 메시지가 객체를 선택하게 해야 한다.

### 메시지 기반 설계
메시지 기반 설계로 바꾸자. 객체를 가지고 있기 때문에 메시지를 보내는 것이 아니다. 메시지를 전송하기 때문에 객체를 갖게 된 것이다. 메시지가 클라이언트의 의도를 표현한다.

>
이 클래스가 필요하다는 점은 알겠는데 이 클래스는 무엇을 해야 하지?(X)
메시지를 전송해야 하는데 누구에게 전송해야 하지?(O)

# 책임 할당을 위한 GRASP 패턴
### GRASP : General Responsibility Assignment Software Pattern
일반적인 책임 할당을 위한 소프트웨어 패턴의 약자로 객체에게 책임을 할당할 때 지침으로 삼을 수 있는 원칙들의 집합을 패턴 형식으로 정리한 것이다.

### 도메인 개념에서 출발하기
설계를 시작하기 전에 도메인에 대한 대략적인 모습을 그려 보는 것이 유용하다. 도메인 개념들을 책임 할당의 대상으로 사용하면 코드에 도메인의 모습을 투영하기가 좀 더 수월해진다. 따라서 책임 할당 시 가장 먼저 고민해야 하는 유력한 후보는 바로 도메인 개념이다.

설계 시작 단계에서는 개념들의 의미와 관계가 정확하거나 완벽할 필요가 없다. 단지 **출발점이 필요할 뿐**이며, 따라서 시작 시점에는 **설계를 시작하기 위해 참고할 수 있는 개념들의 모음** 정도로 간주하자. 도메인 개념을 정리하는데 많은 시간을 들이지 말고 빠르게 설계와 구현을 진행하자.

올바른 도메인 모델이란 존재하지 않는다. 필요한 것은 도메인을 그대로 투영한 모델이 아니라 구현에 도움이 되는 모델, 다시 말하자면 실용적이면서도 유용한 모델이 답이다.

## INFORMATION EXPERT(정보 전문가) 패턴
책임 주도 설계 방식의 첫 단계는 **어플리케이션이 제공해야 하는 기능을 책임으로 생각하는 것**이다. 이 책임을 어플리케이션에 대해 **전송된 메시지로 간주**하고 이 **메시지를 책임질 첫 번째 객체를 선택**하는 것으로 설계를 시작한다. 메시지는 메시지를 수신할 객체가 아니라 **메시지를 전송할 객체의 의도를 반영**해서 결정해야 한다.

메시지를 결정하면 메시지에 적합한 객체를 선택해야 한다. 이 때 객체에게 책임을 할당하는 첫 번째 원칙은  **책임을 정보 전문가, 즉 수행할 정보를 알고 있는 객체에게 책임을 할당하는 것**으로, GRAP에서 이를 INFORMATION EXPERT라 부른다.

이 패턴은 객체가 자율적인 존재라는 사실을 다시 한번 상기시킨다. 정보와 행동을 최대한 가까운 곳에 위치시켜 캡슐화를 유지할 수 있다. 필요한 정보를 가진 객체들로 책임이 분산되기 때문에 응집력이 높아지고, 이해하기도 쉬워진다. 이는 곧 결합도가 낮아진다는 뜻이기도 한다.

개략적인 부분에서 객체의 책임을 결정하는 단계이기 때문에 너무 세세한 부분까지 고민할 필요는 없다. 필요한 작업을 구상해보고 스스로 처리할 수 없는 작업이 무엇인지를 가릴 정도의 수준이면 된다.

만약 스스로 처리할 수 없는 작업이 있다면 외부에 도움을 요청해야 한다. 이 요청이 외부로 전송해야 하는 새로운 메시지가 되고, 이 메시지가 곧 새로운 객체의 책임으로 할당된다. 이런 연쇄적인 방식으로 협력 공동체를 구성하게 된다.

> 여기서 이야기하는 정보는 데이터와 다르다! 책임을 수행하는 객체가 **정보를 '알고' 있다고 해서 그 정보를 '저장'하고 있을 필요는 없다.** 객체는 해당 정보를 제공할 수 있는 다른 객체를 알고 있거나 필요한 정보를 계산하여 줄 수도 있다.
{: .prompt-warning }

