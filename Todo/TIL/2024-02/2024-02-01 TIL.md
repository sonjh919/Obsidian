#TIL #내일배움캠프 #스파르타내일배움캠프 #스파르타내일배움캠프TIL 

- [x] Login api 필터에서 controller로 빼기
- [x] User API 모두 구현하기
- [x] Todo API 설계 및 구현 시작하기

## 💡 오늘의 회고
### 👀 Security는 어디까지 써야할까
filter에다가 로그인 api를 구현했더니, 신경써야 할 부분이 많아지고 Security 설정 부분이 늘어나 api 가독성이 약간 떨어지는 것 같았다. 가장 중요한 점은 filter에 구현하면 swagger에 뜨지 않는 것이었다..! 찾아보았지만 상당히 깊은 곳까지 들어가야해서, 결국 로그인 api를 controller단으로 빼기로 했다. 막상 빼니까 필터 구현보다 여러 면에서 좋다고 느껴졌다.


## 🔥 TIL: Today I Learned
### 👀 @Valid Exception custom하기
Controller단에서 사용되는 @Valid는 bindingresult를 이용하여 예외처리에 대한 내용을 출력할 수 있다. 하지만 나는 이 내용을 response로 보내고 싶었다. 찾아보니, Valid는 내부에서 `MethodArgumentNotValidException`를 발생시킨다고 한다. 따라서, ExceptionController 안에서 @ExceptionHandler를 이용하여 처리할 수 있었다.

```java
@ExceptionHandler(MethodArgumentNotValidException.class)  
public ResponseEntity<ExceptionDto> ValidException(MethodArgumentNotValidException e) {  
    return ResponseEntity.badRequest().body(  
        new ExceptionDto(HttpStatus.BAD_REQUEST.value(), HttpStatus.BAD_REQUEST,  
            e.getBindingResult().getFieldError().getDefaultMessage()));  
}
```
